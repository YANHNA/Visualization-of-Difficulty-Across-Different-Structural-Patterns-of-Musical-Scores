<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Score Viewer Demo · 乐谱选择与图片切换示例</title>
  <style>
    :root{
      --bg:#fafafa;--card:#fff;--text:#222;--muted:#6b7280;--primary:#e11d48;--ring:rgba(225,29,72,.2);
      --radius:14px;--shadow:0 10px 24px rgba(0,0,0,.06);--line:1px solid rgba(0,0,0,.08)
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;background:var(--bg);color:var(--text);line-height:1.6}
    .container{width:min(1100px,100% - 32px);margin:24px auto}
    header p{margin:0 0 18px;color:var(--muted)}
    .grid{display:grid;gap:16px;grid-template-columns:repeat(2,1fr)}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);border:var(--line);padding:16px}
    h2{font-size:18px;margin:0 0 12px;color:#d62249}
    label{display:inline-block;min-width:92px}
    select{border:1px solid rgba(0,0,0,.12);border-radius:10px;padding:6px 10px;font-size:14px;background:var(--card);color:var(--text)}
    select:focus{outline:none;box-shadow:0 0 0 4px var(--ring)}
    .title{font-size:28px;text-align:center;margin:28px 0 8px}
    .subtitle{font-size:12px;color:var(--muted);text-align:center;margin:0 0 18px}
    .sheetWrap{background:var(--card);border-radius:var(--radius);border:var(--line);box-shadow:var(--shadow);padding:8px 8px 16px}
    .sheet{display:block;margin:0 auto;max-width:100%;transform-origin:top center}
    .legend{margin-top:22px;background:var(--card);border:var(--line);box-shadow:var(--shadow);border-radius:var(--radius);padding:16px}
    .legend h3{margin:0 0 8px}
    .row{display:flex;gap:8px;align-items:center;margin:8px 0}
    @media (max-width:640px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <p> Visualization of Difficulty Across Different Structural Patterns of Musical Scores</p>
    </header>

    <!-- 控件区：两张卡片 -->
    <section class="grid">
      <div class="card">
        <h2>Select method</h2>
        <div class="row"><label for="model">Model:</label>
          <select id="model">
            <option>deepgru</option>
            <option>transformer</option>
            <option>baseline</option>
          </select>
        </div>
        <div class="row"><label for="repr">Representation:</label>
          <select id="repr">
            <option>P-V</option>
            <option>P-T</option>
            <option>Note-Seq</option>
          </select>
        </div>
      </div>

      <div class="card">
        <h2>Select score</h2>
        <div class="row"><label for="seed">Seed:</label>
          <select id="seed"></select>
        </div>
        <div class="row"><label for="subset">Subset:</label>
          <select id="subset">
            <option value="test" selected>test</option>
            <option value="train">train</option>
          </select>
        </div>
        <div class="row"><label for="score">Score:</label>
          <select id="score"></select>
        </div>
      </div>
    </section>

    <h1 class="title" id="title">Score Title</h1>
    <p class="subtitle" id="subtitle">demo.xml</p>

    <section class="sheetWrap">
      <img id="scoreImg" class="sheet" src="images/score1.png" alt="score image"/>
    </section>

    <section class="legend">
      <h3>LEGEND:</h3>
      <ul>
        <li>下拉框会切换不同的乐谱 <em>图片文件</em>（并非实时渲染乐谱）。</li>
        <li>你可以将自己的图片放入 <code>images/</code> 目录，并在下方 JS 的 <code>DATA</code> 中配置。</li>
      </ul>
    </section>
  </div>

  <script>
    const DATA = {
      test: {
        seeds: {
          33: {
            title: 'Six Unison Melodies, no. 5, Mikrokosmos, Sz. 107',
            items: [
              { key: '5', img: 'images/score1.png', label: '5.xml' },
              { key: '6', img: 'images/score2.png', label: '6.xml' }
            ]
          },
          12: {
            title: 'Prelude in C — Demo',
            items: [
              { key: '1', img: 'images/score3.png', label: '1.xml' },
              { key: '2', img: 'images/score4.png', label: '2.xml' }
            ]
          }
        }
      },
      train: {
        seeds: {
          1: {
            title: 'Training Piece A — Demo',
            items: [
              { key: 'a', img: 'images/score5.png', label: 'a.xml' },
              { key: 'b', img: 'images/score6.png', label: 'b.xml' }
            ]
          }
        }
      }
    };

    const seedSel = document.getElementById('seed');
    const subsetSel = document.getElementById('subset');
    const scoreSel = document.getElementById('score');
    const img = document.getElementById('scoreImg');
    const titleEl = document.getElementById('title');
    const subtitleEl = document.getElementById('subtitle');

    function fillSeeds(){
      const subset = subsetSel.value;
      const seeds = DATA[subset]?.seeds || {};
      seedSel.innerHTML = Object.keys(seeds).map(k => `<option value="${k}">${k}</option>`).join('');
    }

    function fillScores(){
      const subset = subsetSel.value;
      const seed = seedSel.value;
      const items = (DATA[subset]?.seeds?.[seed]?.items) || [];
      scoreSel.innerHTML = items.map(it => `<option value="${it.key}">${it.key}</option>`).join('');
    }

    function updateView(){
      const subset = subsetSel.value;
      const seed = seedSel.value;
      const key = scoreSel.value;
      const seedObj = DATA[subset]?.seeds?.[seed];
      if(!seedObj){return}
      const item = seedObj.items.find(i => i.key == key) || seedObj.items[0];
      titleEl.textContent = seedObj.title;
      subtitleEl.textContent = (item?.label || key) + '';
      img.src = item.img;
    }

    subsetSel.addEventListener('change', () => { fillSeeds(); fillScores(); updateView(); });
    seedSel.addEventListener('change', () => { fillScores(); updateView(); });
    scoreSel.addEventListener('change', updateView);

    fillSeeds();
    fillScores();
    updateView();
  </script>
</body>
</html>
